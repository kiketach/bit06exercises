<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Login</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"/>
    <link rel="icon" href="https://kiketach.github.io/bit06exercises/imgs/jss.png">
  </head>
  <!-- NAV BAR-->
  <nav class="navbar navbar-light bg-light">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">
        <img
          src="https://img2.freepng.es/20180720/pjj/kisspng-javascript-logo-html-clip-art-javascript-logo-5b5188b16dbcd8.5939232615320700654495.jpg"
          alt=""
          width="65"
          height="35  "
          class="d-inline-block align-text-top"/>
        Ejercicios en Javascript
      </a>
    </div>
  </nav>
<br>
  <body>
    <div class="position-relative">
    <div class="position-absolute top-0 start-50 translate-middle-x">
    <div class="card" style="width: 18rem;">
    <h2 class="text-lg-center">Login</h2>
    <hr />
    <form id="form">
      <fieldset>
        <legend class="fs-6">
        </legend>
        <div id="liveAlertPlaceholder"></div>
        <div class="mb-3 ">
          <label for="username" class="form-labe"
            >Nombre de usuario<span class="text-danger">*</span></label
          >
          <input
            type="text"
            class="form-control"
            id="username"
            name="username"
            aria-describedby="usernameHelp"
          />
        </div>
        <div class="mb-3">
          <label for="password" class="form-label"
            >Contraseña<span class="text-danger">*</span></label
          >
          <input
            type="password"
            class="form-control"
            id="password"
            name="password"
          />
        </div>
        <div class="mb-3 form-check">
          <input
            type="checkbox"
            class="form-check-input"
            id="accept"
            name="accept"
          />
          <label class="form-check-label" for="accept"
            >Acepto condiciones<span class="text-danger">*</span></label
          >
        </div>
        <div class="d-grid gap-2 col-6 mx-auto">
        <button type="submit" class="btn btn-success">Iniciar sesión</button>
      </div>
      </fieldset>
      <br>
    </form>
    </div>
    </div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"
    ></script>
    <script>

'use strict';
// CONSTANTES Y VARIABLES
const $form = document.getElementById('form');
const $legend = document.getElementsByTagName('legend')[0];
const alertPlaceholder = document.getElementById('liveAlertPlaceholder');

// OBJETOS
const formulario = {
  username: null,
  password: null,
  accept: null,
};

// FUNCIONES
const alert = (message, type) => {
  const wrapper = document.createElement('div');
  wrapper.innerHTML = [
    `<div class="alert alert-${type} alert-dismissible" role="alert">`,
    `   <div>${message}</div>`,
    '   <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>',
    '</div>',
  ].join('');
  alertPlaceholder.append(wrapper);
};

function checkFormulario() {
  if (formulario.username && formulario.password && formulario.accept)
    return true;
  else return false;
}

function checkPermitido(obj) {
  try {
    const permitido = {
      username: 'enrique',
      password: 1990,
      accept: true,
    };
    if (
      obj.username === permitido.username &&
      parseInt(obj.password) === permitido.password &&
      obj.accept === permitido.accept
    ) {
      window.open('https://kiketach.github.io/bit06exercises/welcome.html', '_self');
    } else {
      alert(
        'Usuario no registrado. Intenta nuevamente!',
        'warning'
      );
    }
  } catch (error) {
    console.log('se produjo un error en la función checkPermitido:', error);
  }
}

// EVENTOS
$form.username.addEventListener('input', (e) => {
  formulario.username = e.target.value;
});

$form.password.addEventListener('input', (e) => {
  formulario.password = e.target.value;
});

$form.accept.addEventListener('change', (e) => {
  formulario.accept = e.target.checked;
});

$form.addEventListener('submit', (e) => {
  e.preventDefault();
  if (checkFormulario() === true) {
    checkPermitido(formulario);
  } else {
    $legend.classList.add('text-danger');
    alert('Todos los campos son obligatorios.', 'danger');
  }
});
    </script>
  </body>
</html>